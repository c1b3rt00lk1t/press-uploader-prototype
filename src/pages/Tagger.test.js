import React from "react";
import "@testing-library/jest-dom/extend-expect";
import { render, screen } from "@testing-library/react";

import Tagger from "./Tagger";
import PressUploaderContext from "../contexts/PressUploaderContext";
import { BrowserRouter as Router, Route, Routes } from "react-router-dom";


/** The test has been created emulating the Routing and providing some default input for the Context variables that are normally calculated before the App allows the component to be accessed.
 */
const taggedFiles = [
  {
    date: "00000000",
    source: "label",
    title: "Financiero",
    order: 0,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307160",
  },
  {
    date: "20230704",
    source: "Expansión",
    title:
      "El BCE avisa sobre los riesgos de intervenir el precio de los depósitos",
    order: 1,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307161",
  },
  {
    date: "20230706",
    source: "Expansión",
    title: "Los precios de producción de la eurozona caen a valores negativos",
    order: 2,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307162",
  },
  {
    date: "20230707",
    source: "Expansión",
    title: "La banca prevé otra caída del crédito en el segundo trimestre",
    order: 3,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307163",
  },
  {
    date: "20230708",
    source: "Expansión",
    title: "El BCE advierte del riesgo de doble subida en márgenes y salarios",
    order: 4,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307164",
  },
  {
    date: "20230712",
    source: "Expansión",
    title: "CaixaBank coloca 1.500 millones en bonos con sobredemanda",
    order: 5,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307165",
  },
  {
    date: "20230715",
    source: "Expansión",
    title:
      "JPMorgan y Wells Fargo disparan el beneficio gracias a la subida de tipos",
    order: 6,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307166",
  },
  {
    date: "20230706",
    source: "Expansión",
    title: "Los mayores bancos de EEUU elevan los dividendos",
    order: 7,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307167",
  },
  {
    date: "20230709",
    source: "Bloomberg",
    title: "Powell Haunted by Repo Crisis as Fed Aims to Cut Balance Sheet",
    order: 8,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307168",
  },
  {
    date: "20230711",
    source: "Expansión",
    title:
      "El tremendo coste de las subidas de tipos_ 8 billones de dólares al año",
    order: 9,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "202307169",
  },
  {
    date: "20230711",
    source: "Expansión",
    title: "Los créditos morosos pasan factura a la banca de EEUU",
    order: 10,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071610",
  },
  {
    date: "20230713",
    source: "Expansión",
    title:
      "La inflación en EEUU retrocede hasta el 3 por cien, su mejor registro en dos años",
    order: 11,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071611",
  },
  {
    date: "20230714",
    source: "Expansión",
    title: "El mercado de bonos basura de EEUU se contrae",
    order: 12,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071612",
  },
  {
    date: "20230711",
    source: "Expansión",
    title: "La economía de China, al borde de la deflación",
    order: 13,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071613",
  },
  {
    date: "20230709",
    source: "Bloomberg",
    title: "China Slides to Brink of Deflation_ Adding Stimulus Urgency",
    order: 14,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071614",
  },
  {
    date: "20230712",
    source: "Bloomberg",
    title: "China_s Worse-Than-Expected Exports Deal New Blow to Economy",
    order: 15,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071615",
  },
  {
    date: "20230714",
    source: "Expansión",
    title:
      "Por qué flirtea China con la deflación y Occidente combate el alza de precios",
    order: 16,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071616",
  },
  {
    date: "20230705",
    source: "Bloomberg",
    title: "BRICS Has No Immediate Plan for a Currency_ CFO of Its Bank Says",
    order: 17,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071617",
  },
  {
    date: "00000000",
    source: "label",
    title: "Energía",
    order: 18,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071618",
  },
  {
    date: "20230710",
    source: "Bloomberg",
    title: "Russia-Linked Oil Tanker Fleet Vanishes Even Faster Than It Grew",
    order: 19,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071619",
  },
  {
    date: "20230712",
    source: "Bloomberg",
    title: "Latest Oil Prices_ Market News and Analysis for July 13",
    order: 20,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071620",
  },
  {
    date: "20230713",
    source: "Bloomberg",
    title: "Russia Finally Cuts Crude Exports_ at Most Opportune Moment",
    order: 21,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071621",
  },
  {
    date: "20230714",
    source: "Expansión",
    title: "La OPEP eleva su producción a pesar del recorte pactado",
    order: 22,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071622",
  },
  {
    date: "00000000",
    source: "label",
    title: "Cadena de suministro/Semiconductores",
    order: 23,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071623",
  },
  {
    date: "20230715",
    source: "Expansión",
    title: "Seat deja atrás la crisis de los chips y crece un 29 por cien",
    order: 24,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071624",
  },
  {
    date: "20230708",
    source: "Expansión",
    title: "Samsung recorta un 96 por cien su beneficio por el exceso de chips",
    order: 25,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071625",
  },
  {
    date: "20230710",
    source: "Expansión",
    title: "Biden estudia una mejora de las relaciones entre EEUU y China",
    order: 26,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071626",
  },
  {
    date: "20230707",
    source: "Bloomberg",
    title: "Gallium Prices Jump 27_ Before China Export Controls Kick In",
    order: 27,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071627",
  },
  {
    date: "20230712",
    source: "Expansión",
    title:
      "El Parlamento Europeo aprueba una ley de chips para duplicar la producción",
    order: 28,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071628",
  },
  {
    date: "00000000",
    source: "label",
    title: "Cadena de suministro/Distribución",
    order: 29,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071629",
  },
  {
    date: "20230706",
    source: "Expansión",
    title: "Dia recupera la cota de los 1.000 franquiciados en España",
    order: 30,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071630",
  },
  {
    date: "00000000",
    source: "label",
    title: "Cadena de suministro/Fuerza de Trabajo",
    order: 31,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071631",
  },
  {
    date: "20230712",
    source: "Bloomberg",
    title:
      "Shopify Shames Workers With a _1_600 Price Tag for Pointless Meetings",
    order: 32,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071632",
  },
  {
    date: "20230715",
    source: "Expansión",
    title: "Binance recorta más de mil empleados",
    order: 33,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071633",
  },
  {
    date: "20230715",
    source: "Expansión",
    title: "Huelga de ocho días en Gatwick en plena temporada alta",
    order: 34,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071634",
  },
  {
    date: "00000000",
    source: "label",
    title: "Automovilístico",
    order: 35,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071635",
  },
  {
    date: "20230705",
    source: "Expansión",
    title: "Toyota rebajará a la mitad peso y coste en sus nuevas baterías",
    order: 36,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071636",
  },
  {
    date: "20230712",
    source: "Expansión",
    title: "La india BluSmart desafía a Uber con sus coches eléctricos",
    order: 37,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071637",
  },
  {
    date: "00000000",
    source: "label",
    title: "Aeronáutico",
    order: 38,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071638",
  },
  {
    date: "20230706",
    source: "Expansión",
    title: "Japan Airlines alquilará ropa para viajar sin maletas",
    order: 39,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071639",
  },
  {
    date: "00000000",
    source: "label",
    title: "EEUU",
    order: 40,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071640",
  },
  {
    date: "20230706",
    source: "Expansión",
    title: "Twitter defiende las restricciones de uso para evitar bots",
    order: 41,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071641",
  },
  {
    date: "20230707",
    source: "Expansión",
    title: "Threads golpea a Musk donde duele",
    order: 42,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071642",
  },
  {
    date: "20230708",
    source: "Expansión",
    title: "Twitter amenaza con demandar a Meta por su app Threads",
    order: 43,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071643",
  },
  {
    date: "00000000",
    source: "label",
    title: "Tecnología",
    order: 44,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071644",
  },
  {
    date: "20230714",
    source: "Expansión",
    title: "Meta lanzará un modelo comercial de inteligencia artificial",
    order: 45,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071645",
  },
  {
    date: "00000000",
    source: "label",
    title: "OTAN",
    order: 46,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071646",
  },
  {
    date: "20230710",
    source: "Bloomberg",
    title:
      "Europe Can_t Supply Ukraine With Weapons Fast Enough Against Russia",
    order: 47,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071647",
  },
  {
    date: "20230713",
    source: "Expansión",
    title: "Agridulce éxito para Zelenski en la cumbre de la OTAN",
    order: 48,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071648",
  },
  {
    date: "00000000",
    source: "label",
    title: "Rusia",
    order: 49,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071649",
  },
  {
    date: "20230708",
    source: "Expansión",
    title: "Los vínculos de Prigozhin con Putin dejan al Kremlin en un aprieto",
    order: 50,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071650",
  },
  {
    date: "20230710",
    source: "Bloomberg",
    title:
      "Vladimir Putin Met Wagner Chief Yevgeny Prigozhin Days After Revolt Kremlin",
    order: 51,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071651",
  },
  {
    date: "00000000",
    source: "label",
    title: "Latinoamérica",
    order: 52,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071652",
  },
  {
    date: "20230703",
    source: "Expansión",
    title: "Mercosur quiere cerrar un acuerdo definitivo con la UE",
    order: 53,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071653",
  },
  {
    date: "00000000",
    source: "label",
    title: "UE",
    order: 54,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071654",
  },
  {
    date: "20230714",
    source: "Expansión",
    title: "Renfe se convierte en el gran rival de SNCF en el sur de Francia",
    order: 55,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071655",
  },
  {
    date: "00000000",
    source: "label",
    title: "Pakistán",
    order: 56,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071656",
  },
  {
    date: "20230714",
    source: "Bloomberg",
    title: "IMF Loan Helps Pakistan Unlock Another _5.6 Billion in Funding",
    order: 57,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071657",
  },
  {
    date: "00000000",
    source: "label",
    title: "India",
    order: 58,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071658",
  },
  {
    date: "20230704",
    source: "Bloomberg",
    title: "India Increases Africa Lending in Race to Counter China",
    order: 59,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071659",
  },
  {
    date: "00000000",
    source: "label",
    title: "África/Sudáfrica",
    order: 60,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071660",
  },
  {
    date: "20230710",
    source: "Bloomberg",
    title:
      "South Africa News N4 Highway Attackers Torch Trucks on Another Key Trade Route",
    order: 61,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071661",
  },
  {
    date: "00000000",
    source: "label",
    title: "Estado español/Economía",
    order: 62,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071662",
  },
  {
    date: "20230703",
    source: "Expansión",
    title: "España, segundo destino más económico para los británicos",
    order: 63,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071663",
  },
  {
    date: "20230713",
    source: "Expansión",
    title:
      "El IPC se modera al 1,9 por cien, pero 50 productos siguen por encima dle 10 por cien",
    order: 64,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071664",
  },
  {
    date: "00000000",
    source: "label",
    title: "Estado español/Laboral",
    order: 65,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071665",
  },
  {
    date: "20230706",
    source: "Expansión",
    title:
      "El Círculo pide el retraso de la jubilación, desde los 67 a los 68 años y, de forma voluntaria, a los 72",
    order: 66,
    session: "20230716",
    zones: [],
    sectors: [],
    tags: [],
    others: [],
    id: "2023071666",
  },
];
const previous = [];

describe("Tests for the Tagger page", () => {
  it("Should render an input component with a placeholder", () => {
    render(
      <PressUploaderContext.Provider value={{ taggedFiles, previous }}>
        <Router>
          <Routes>
            <Route path="/" element={<Tagger />} />
          </Routes>
        </Router>
      </PressUploaderContext.Provider>
    );
    const placeholder = screen.getByPlaceholderText(
      /Type a zone, sector or tag.../i
    );
    expect(placeholder).toBeDefined();
  });
  it("Should render a button to reset the dictionary", () => {
    render(
      <PressUploaderContext.Provider value={{ taggedFiles, previous }}>
        <Router>
          <Routes>
            <Route path="/" element={<Tagger />} />
          </Routes>
        </Router>
      </PressUploaderContext.Provider>
    );
    const resetButton = screen.getAllByRole('button',
        {name: /Reset/i}
      );

    expect(resetButton).toBeDefined();
  });

});
